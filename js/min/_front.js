function headingHeight(){if($(".full-screen h3").each(function(){$(this).removeAttr("style")}),"large"==breakpoints()){var a;$(".full-screen").each(function(){a=0,$(this).find("h3").each(function(){a=0==a?$(this).height()/parseInt($(this).css("line-height")):$(this).height()/parseInt($(this).css("line-height"))>=a?a=$(this).height()/parseInt($(this).css("line-height")):a}),$(this).find("h3").each(function(){$(this).height()/parseInt($(this).css("line-height"))!==a&&$(this).css("line-height","2.4")})})}}function overflowing(){var a=$("#frontpage").children("section"),b=!1;$.each(a,function(){$("body").removeClass("overflowing");var a=$(this).children(".contents").innerHeight()>$(this)[0].scrollHeight;a?($(this).removeClass("full-screen"),b=!0):$(this).addClass("full-screen")}),b?$("body").addClass("overflowing"):$("body").removeClass("overflowing"),$("body").hasClass("overflowing")&&$("#main").css("height",$("#main").height()-300)}function singleAction(){var a=location.hash,b=$(a);""==a&&(a="#intro",location.hash=a,b=$(a)),findSections(b);var c=!1,d=!1;"#intro"==a?d=!0:($(".dark-corner").css("top","-200%"),$(".intro-layout").css("top","-4000px").addClass("already-seen")),$(".frontnav-item").each(function(){$(this).children("a").attr("href")==a&&$(this).addClass("active")});var e=1e3;$("html").on("mousewheel DOMMouseScroll onmousewheel touchmove scroll",function(a){if($(a.target).parents("#menu").length>0)return!1;if("large"==breakpoints()&&!$("body").hasClass("overflowing")){if($("#main").removeAttr("style"),"el"==a.target.id)return;a.preventDefault(),a.stopPropagation(),c||(c=!0,$(window).disablescroll(),a.originalEvent.wheelDelta&&a.originalEvent.wheelDelta>=0||a.originalEvent.detail&&a.originalEvent.detail<=0?(a.stopPropagation(),b=$(prevSection),"#intro"==prevSection&&"#concept"!==nextSection?(d=!0,$("html, body").animate({scrollTop:prevOffset.top},e,function(){location.hash="#"+b.attr("id")}),$(".dark-corner").animate({top:"-50%"},.5*e),setTimeout(function(){$(".intro-layout").animate({top:"0"},1.5*e)},.25*e)):$("html, body").animate({scrollTop:prevOffset.top},e,function(){location.hash="#"+b.attr("id")}),findSections(b)):(a.stopPropagation(),b=$(nextSection),d?($(".dark-corner").animate({top:"-200%"},.75*e),setTimeout(function(){$(".intro-layout").animate({top:"-4000px"},2*e)},.25*e),setTimeout(function(){$("html, body").animate({scrollTop:nextOffset.top},e,function(){location.hash="#"+b.attr("id"),findSections(b)})},e),d=!1):($("html, body").animate({scrollTop:nextOffset.top},e,function(){location.hash="#"+b.attr("id")}),findSections(b))),setTimeout(function(){c=!1,$(window).disablescroll("undo"),$(".frontnav-item").each(function(){$(this).removeClass("active"),$(this).children("a").attr("href")=="#"+b.attr("id")&&$(this).addClass("active")})},e+500))}}),$(".frontnav-item").on("click",function(f){f.preventDefault(),c=!0,$(window).disablescroll();var g=$(this).children("a").attr("href");b=$(a);var h=$(this);$(this).addClass("clicking"),$(this).siblings().each(function(){$(this).removeClass("active")}),setTimeout(function(){h.addClass("active").removeClass("clicking")},.25*e),d?(d=!1,$(".dark-corner").animate({top:"-200%"},.75*e),setTimeout(function(){$(".intro-layout").animate({top:"-4000px"},2*e)},.25*e),setTimeout(function(){$("html, body").animate({scrollTop:$(g).offset().top},e,function(){location.hash="#"+$(g).attr("id"),findSections($(g))})},e)):"#intro"==g?(d=!0,findSections($(g)),$("html, body").animate({scrollTop:$(g).offset().top},e,function(){location.hash=g,findSections($(g))}),$(".dark-corner").animate({top:"-50%"},.5*e),setTimeout(function(){$(".intro-layout").animate({top:"0"},1.5*e)},.25*e)):(setTimeout(function(){$("html, body").animate({scrollTop:$(g).offset().top},e,function(){location.hash="#"+$(g).attr("id"),findSections($(g))})},100),d=!1),setTimeout(function(){c=!1,$(window).disablescroll("undo")},e)})}function findSections(a){prevSection=1==a.prev().length?"#"+a.prev().attr("id"):"#"+a.attr("id"),nextSection=1==a.next().length?"#"+a.next().attr("id"):"#"+a.attr("id"),prevOffset=$(prevSection).offset(),nextOffset=$(nextSection).offset()}function debounce(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||250)}}$(function(){overflowing(),headingHeight(),singleAction()}),$(window).smartresize(function(a){if(overflowing(),headingHeight(),!$("body").hasClass("overflowing")&&"large"==breakpoints()){var b=$(location.hash).offset();setTimeout(function(){$(window).scrollTop(b.top)},50)}}),$(window).on("load",function(){if(""!==location.hash){var a=$(location.hash).offset();setTimeout(function(){$(window).scrollTop(a.top)},50)}});